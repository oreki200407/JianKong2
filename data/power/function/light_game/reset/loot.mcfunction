$execute if data block ~ ~ ~ Items[{Slot:$(number)b}] run data modify block ~ ~ ~ Items[{Slot:$(number)b}].components."minecraft:custom_data".number set value $(number)
$execute if data block ~ ~ ~ Items[{Slot:$(number)b}] run return run data modify block ~1 ~ ~ Items[{Slot:$(number)b}].components."minecraft:custom_data".chest2 set value 1
$execute unless data block ~ ~ ~ Items[{Slot:$(number)b}] run loot replace block ~ ~ ~ container.$(number) loot {"pools": [{"rolls": 1,"entries": [{"type": "minecraft:item","weight": 1,"name": "minecraft:coal","functions": [{"function": "minecraft:set_count","count": 1},{"function": "minecraft:set_custom_model_data","strings": {"values": ["green"],"mode": "append"}},{"function": "minecraft:set_name","name": {"text": ""}},{"function": "minecraft:set_components","components": {"minecraft:tooltip_display": {"hide_tooltip": true}}},{"function": "minecraft:set_custom_data","tag": "{number:$(number)}"}]}]}]}